pipeline
{
  agent any
  tools
  {
	maven 'maven3.9.0'
  }

  parameters 
  {
  choice choices: ['development', 'master', 'stage'], description: 'select the branch to build', name: 'BranchName'
  }


  stages{
    stage ('checkoutcode')
    {
        steps
      {
            git branch: 'development', credentialsId: 'Git_Credentials', url: 'https://github.com/maheshgamyadevops/maven-web-application.git'
      }
    }
	stage ('parametirzed') 
	{
		steps
		{
			echo " branches are ${BranchName} "
		}
	}
	stage ('build')
    {
        steps
      {
             sh "mvn clean package"
      }
    }
	stage ('deployToContainer')
    {
        steps
      {
            deploy adapters: [tomcat9(credentialsId: 'tomcat_Credentials', path: '', url: 'http://65.2.180.7:8080/')], contextPath: null, onFailure: false, war: '**/maven-web-application.war'
      }
    }
    
  }
  
}
